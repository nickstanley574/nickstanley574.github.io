<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Whitelisting Aws Access Keys | nickstanley574</title>

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/favicons/site.webmanifest">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

  <link rel="stylesheet" href="/assets/css/style.css">

  <!-- external -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

  <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>

  <scriptfenced_code_blocks src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
    </script>

    <script data-goatcounter="https://nickstanley574.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
    <script src="/assets/scripts.js"></script>

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Whitelisting Aws Access Keys</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Whitelisting Aws Access Keys" />
<meta name="author" content="Nick Stanley" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A few weeks back, I was discussing security with friends over a few beers. We talked about IP whitelisting to secure environments—like using specific IP access for a jump host or allowing the build server to deploy to particular instances. The conversation moved to AWS, specifically about how scary AWS Access Keys are since they don’t require MFA. Someone mentioned they thought you needed to be on the VPN to allow the usage of the Access Keys, and someone else asked what you have set up to enforce that?" />
<meta property="og:description" content="A few weeks back, I was discussing security with friends over a few beers. We talked about IP whitelisting to secure environments—like using specific IP access for a jump host or allowing the build server to deploy to particular instances. The conversation moved to AWS, specifically about how scary AWS Access Keys are since they don’t require MFA. Someone mentioned they thought you needed to be on the VPN to allow the usage of the Access Keys, and someone else asked what you have set up to enforce that?" />
<link rel="canonical" href="http://0.0.0.0:4000/blog/2021/07/12/Whitelisting-AWS-Access-Keys" />
<meta property="og:url" content="http://0.0.0.0:4000/blog/2021/07/12/Whitelisting-AWS-Access-Keys" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-07-12T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Whitelisting Aws Access Keys" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Nick Stanley"},"dateModified":"2021-07-12T00:00:00-05:00","datePublished":"2021-07-12T00:00:00-05:00","description":"A few weeks back, I was discussing security with friends over a few beers. We talked about IP whitelisting to secure environments—like using specific IP access for a jump host or allowing the build server to deploy to particular instances. The conversation moved to AWS, specifically about how scary AWS Access Keys are since they don’t require MFA. Someone mentioned they thought you needed to be on the VPN to allow the usage of the Access Keys, and someone else asked what you have set up to enforce that?","headline":"Whitelisting Aws Access Keys","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/blog/2021/07/12/Whitelisting-AWS-Access-Keys"},"url":"http://0.0.0.0:4000/blog/2021/07/12/Whitelisting-AWS-Access-Keys"}</script>
<!-- End Jekyll SEO tag -->

</head>

<div class="header">
  <ul class="nav">
    <li><a href="/">Home</a></li>
    <li><a href="/projects/">Projects</a></li>
    <li><a href="/library/">Library</a></li>
    <li><a href="/manifesto/">Manifesto</a></li>
    <li><a href="/resume/">Resume</a></li>
  </ul>
</div>

<body>
  <h1>Whitelisting Aws Access Keys</h1>
<div class="post-date">
    Monday, July 12, 2021
</div>

<p>A few weeks back, I was discussing security with friends over a few beers. We talked about IP whitelisting to secure environments—like using specific IP access for a jump host or allowing the build server to deploy to particular instances. The conversation moved to AWS, specifically about how scary AWS Access Keys are since they don’t require MFA. Someone mentioned they thought you needed to be on the VPN to allow the usage of the Access Keys, and someone else asked what you have set up to enforce that?</p>

<p>It was at that moment that one of my friends’ faces changed because he realized there was nothing preventing the usage of AWS Access Keys off their company’s internal network. We have all experienced those moments in our careers. They asked us how we handle AWS Access Keys and we point them to whitelisting IP Address with IAM permissions. There is a Deny all action policy that you can apply to prevent any request not coming from a set ip range.</p>

<p>For example,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "Version": "2012-10-17",
    "Statement": {
        "Effect": "Deny",
        "Action": "*",
        "Resource": "*",
        "Condition": {
            "NotIpAddress": {
                "aws:SourceIp": [
                    "192.0.2.0/24",
                    "203.0.113.0/24"
                ]
            }
        }
    }
}
</code></pre></div></div>
<p>From: <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_examples_aws_deny-ip.html">AWS: Denies access to AWS based on the source IP</a></p>

<p>Later my friend implemented the Deny policy based on Ip Address and it worked and he was  praised for the implementation.  It’s funny how some of the best free consulting happens over a few pints of beer.</p>



<div id="back-to-top">
    <a onclick="scrollToTop()">▲ Back to Top ▲</a>
  </div>
</body>

</html>